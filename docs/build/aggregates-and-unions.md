---
title: "集約と共用体 | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "集約 [C++], および共用体"
ms.assetid: 859fc211-b111-4f12-af98-de78e48f9b92
caps.latest.revision: 7
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
caps.handback.revision: 7
---
# 集約と共用体
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

配列、構造体、共用体などの、その他の型には、集約と共用体の一貫したストレージおよびデータ取得を確実に行うためのきわめて厳密なアライメント要件が存在します。  配列、構造体、および共用体の定義を次に示します。  
  
 配列  
 隣接するデータ オブジェクトの順序付けグループを含みます。  各オブジェクトを配列の要素といいます。  配列内のすべての要素は、サイズおよびデータ型が同じです。  
  
 Structure  
 データ オブジェクトの順序付けグループを含みます。  配列の要素とは異なり、構造体のデータ オブジェクトのデータ型とサイズは、それぞれ異なります。  構造体の各データ オブジェクトを、メンバーといいます。  
  
 共用体  
 名前付きメンバー セットのいずれか 1 つを保持するオブジェクトです。  名前付きセットのメンバーには、任意の型を指定できます。  共用体に割り当てられるストレージは、その共用体で最も大きいメンバーが必要とするストレージに、アライメントに必要な埋め込みを加えたものです。  
  
 共用体と構造体のスカラー メンバーに対して強く推奨されるアライメントを次の表に示します。  
  
||||  
|-|-|-|  
|スカラー型|C データ型|必要なアライメント|  
|**INT8**|`char`|Byte|  
|**UINT8**|`unsigned char`|Byte|  
|**INT16**|**short**|Word|  
|**UINT16**|**unsigned short**|Word|  
|**INT32**|**int、long**|ダブルワード型 \(Doubleword\)|  
|**UINT32**|**unsigned int、unsigned long**|ダブルワード型 \(Doubleword\)|  
|**INT64**|`__int64`|クワドワード型 \(Quadword\)|  
|**UINT64**|**unsigned \_\_int64**|クワドワード型 \(Quadword\)|  
|**FP32 \(単精度\)**|**float**|ダブルワード型 \(Doubleword\)|  
|**FP64 \(倍精度\)**|**double**|クワドワード型 \(Quadword\)|  
|**POINTER**|**\***|クワドワード型 \(Quadword\)|  
|`__m64`|**struct \_\_m64**|クワドワード型 \(Quadword\)|  
|`__m128`|**struct \_\_m128**|Octaword|  
  
 適用される集約アライメント規則は次のとおりです。  
  
-   配列のアライメントは、配列の中の 1 つの要素のアライメントと同じです。  
  
-   構造体または共用体の開始位置のアライメントは、個々のメンバーの中での最大アライメントです。  構造体または共用体の各メンバーは、上の表の定義に従って、適切なアライメントで位置づける必要があります。また、アライメントには、前のメンバーに従って暗黙的な内部埋め込みが必要になる場合があります。  
  
-   構造体のサイズは、そのアライメントの整数倍であることが必要です。アライメントでは、最後のメンバーの後に埋め込みが必要になる場合があります。  構造体や共用体は配列でグループ化される場合があるため、構造体や共用体の各配列要素は、あらかじめ定義した適切なアライメントで開始および終了する必要があります。  
  
-   以前の規則が維持されている間は、アライメント要件より大きくなるようにデータを配置できます。  
  
-   サイズ上の理由により、各コンパイラは構造体のパッキングを調整できます。  たとえば、[\/Zp \(構造体メンバーの配置\)](../Topic/-Zp%20\(Struct%20Member%20Alignment\).md) を使用して、構造体のパッキングを調整できます。  
  
## 参照  
 [型とストレージ](../build/types-and-storage.md)