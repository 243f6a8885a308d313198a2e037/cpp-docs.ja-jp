---
title: "1.3 Execution Model | Microsoft Docs"
ms.custom: ""
ms.date: "12/03/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
ms.assetid: 85ae8bc4-5bf0-45e0-a45f-02de9adaf716
caps.latest.revision: 5
caps.handback.revision: 5
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# 1.3 Execution Model
[!INCLUDE[vs2017banner](../../assembler/inline/includes/vs2017banner.md)]

OpenMP には並列実行する fork\-join モデルを使用します。  fork\-join のこのモデルはさまざまな問題を解決するために便利ですが大きな配列ベースのアプリケーション用になったされます。  OpenMP は並列プログラム \(実行およびすべての OpenMP のサポート ライブラリの複数のスレッド\) と順次プログラムとして正しく実装の両方をサポートするプログラムを前提としています \(ディレクティブおよび単純な OpenMP ではぶつけます\)。  ただし正しく動作しないプログラムを作成できますが割り当てられた順番に実行された場合は。  またさまざまな並列化の次数は数値演算の関連付けの変更に異なる数値結果が発生することがあります。  たとえば逐次追加の縮小は並列縮小追加の関連付けの別のパターンを持つ場合があります。  これらのさまざまな関連付けは浮動小数点加算した結果が変わることがあります。  
  
 OpenMP C\/C\+\+ の API で書かれたプログラムではシングル スレッドが  *マスター スレッドを*  呼び出すように実行を開始します。  マスター スレッドはシリアル領域の最初の parallel コンストラクトが出現するまで実行されます。  OpenMP C\/C\+\+ API では **並列**  のディレクティブはparallel コンストラクトを構成します。  parallel コンストラクトがある場合はマスター スレッドはスレッドのチームを作成しマスターはチームのマスターになります。  チームの各スレッドが共有作業の構造を除き並列領域の動的範囲のステートメントを実行します。  構造体を共有する作業も同じ順序でチームのすべてのスレッドによってキャッチされない場合関連の構造化ブロック内のステートメントは一つ以上のスレッドによって実行されます。  `nowait` の句なしで作業共有構造体の最後で暗黙的なバリアはチームのすべてのスレッドによって実行されます。  
  
 スレッドが共有オブジェクトを変更する場合は独自の実行環境ほかのスレッドで環境に影響します。  変更は揮発性であるために次のシーケンス ポイントで他のスレッドの 1 種類の観点から完全として \(基本言語で定義されている場合にのみオブジェクト宣言するとは限りません。  それ以外の変更は変更のスレッドが完了するように保証次に \(または同時に他のスレッドはオブジェクトを指定する  **フラッシュ**  のディレクティブを使用します \(暗黙的または明示的\)。  OpenMP のディレクティブによって暗黙的に指定  **フラッシュ**  のディレクティブが副作用の目的の命令を確認するのに十分でないと **フラッシュ**  の追加明示的なディレクティブを指定するプログラマの役割であることに注意してください。  
  
 parallel コンストラクトを完了すると暗黙的なバリアのチームのスレッド同期およびマスター スレッドは実行を継続できます。  parallel コンストラクトをいくつでも一つのプログラムで指定できます。  その結果プログラムの実行中に分岐すると何回も結合場合があります。  
  
 OpenMP C\/C\+\+ API はプログラマが parallel コンストラクトで呼び出された関数でディレクティブを使用できるようになります。  parallel コンストラクトの構文範囲に表示されませんが動的範囲になる場合があります。ディレクティブは *デタッチされた*  ディレクティブと呼ばれます。  デタッチされたディレクティブはプログラマが順次プログラムに対する最小限の変更だけに並列プログラムのほとんどを実行できます。  この機能を使用するとプログラムのコール ツリーの最上位の parallel コンストラクトのコードは呼び出された関数の実行を制御するにはディレクティブを使用できます。  
  
 同じファイルに書き込む C および C\+\+ の出力関数への非同期呼び出しを異なるスレッドで作成したデータが非確定的な順序で表示される出力が発生することがあります。  同様に同じファイルを読み取る入力関数は同期されていない呼び出しは非確定的な順序でデータを読み込む場合もあります。  各スレッドが別のファイルにアクセスする I\/Oそのうちの非同期 I\/O の使用は関数のシリアル実行と同じ結果を生成します。