---
title: 1.3 実行モデル |Microsoft Docs
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-parallel
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: 85ae8bc4-5bf0-45e0-a45f-02de9adaf716
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: c284563a47d21abc9a1dacf045238449d64205d5
ms.sourcegitcommit: 799f9b976623a375203ad8b2ad5147bd6a2212f0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/19/2018
ms.locfileid: "46394011"
---
# <a name="13-execution-model"></a>1.3 実行モデル

OpenMP では、並列実行の fork と join のモデルを使用します。 この fork と join のモデルのさまざまな問題を解決するのに役立ちますが、ある程度配列ベースの大規模なアプリケーション用に調整されています。 OpenMP は、順次プログラム (ディレクティブは無視し、簡単な OpenMP スタブ ライブラリ) とは両方として正しく実行プログラム (複数のスレッドの実行および完全な OpenMP サポート ライブラリ) の並列プログラムをサポートするものです。 ただし、可能性があり、順番に実行時に正常に動作しないプログラムを開発します。 さらに、並列処理の程度が異なる可能性があります数値結果をさまざまな数値演算の関連付けの変更のため。 たとえば、シリアル加算削減には、並列リダクションと加算の関連付けのさまざまなパターンがあります。 これらの異なる関連付けでは、浮動小数点加算の結果を変更できます。

OpenMP C と C++ API で記述されたプログラムと呼ばれる実行の 1 つのスレッドとして実行を開始する、*マスター スレッド*します。 マスタ スレッドは、最初の parallel コンストラクトが出現するまでシリアル領域で実行します。 OpenMP C と C++ API で、**並列**ディレクティブは、parallel コンストラクトを構成します。 Parallel コンストラクトが発生した場合に、マスター スレッドは、スレッドのチームを作成し、チームのマスターになります。 チーム内の各スレッドは、動的 work-sharing コンス トラクターを除く、並行領域の範囲でステートメントを実行します。 Work-sharing コンス トラクターは、同じ順序で、チームのすべてのスレッドで発生する必要があり、関連付けられている構造化ブロック内のステートメントが 1 つまたは複数のスレッドによって実行されます。 せず work-sharing コンス トラクターの末尾に暗黙的に指定するバリア、`nowait`句は、チームのすべてのスレッドによって実行されます。

スレッドが共有されたオブジェクトを変更した場合、独自の実行環境だけでなく、プログラム内の他のスレッドのものに影響します。 変更が完了する、次のシーケンス ポイントで他のスレッドの 1 つの観点から (ベースの言語で定義) された揮発性のあるオブジェクトが宣言されている場合にのみ保証されます。 最初にスレッド、変更後に完了する、変更を保証するそれ以外の場合、およびし (または同時に) 他のスレッドが発生、**フラッシュ**(暗黙的または明示的に) オブジェクトを指定するディレクティブ。 場合、**フラッシュ**他 OpenMP ディレクティブによって暗黙的に指定されたディレクティブは、副作用の目的の順序を確認するのには不十分な追加、明示的に指定するはプログラマの役目は**フラッシュ**ディレクティブ。

Parallel コンストラクトの完了したらで暗黙的なバリアでは、チーム内のスレッドを同期し、マスター スレッドのみが実行を継続します。 1 つのプログラムでは、parallel コンストラクトの任意の数を指定できます。 その結果、プログラムはフォークし、結合の実行中に何度も可能性があります。

OpenMP C と C++ API では、parallel コンストラクト内から呼び出された関数でディレクティブを使用するプログラマができるようにします。 ディレクティブは、parallel コンストラクトの構文の範囲では表示されませんが、動的範囲内にある場合がありますと呼ばれる*孤立した*ディレクティブ。 孤立したディレクティブにより、プログラマは、逐次プログラムに並列的にのみ最小限の変更で、プログラムの主要な部分を実行する機能。 この機能により、ユーザーは、プログラムのコール ツリーの最上位レベルにある parallel コンストラクトを作成し、ディレクティブを使用して、呼び出された関数のいずれかで実行を制御できます。

C および C++ に同期されていない呼び出しでは、出力を別のスレッドで書き込まれたデータが順不同で表示される可能性があります、同じファイルに書き込む関数を出力します。 同様に、同じファイルから読み取られた関数の入力に同期されていない呼び出しでは、非決定的な順序でデータを読み取ることができます。 各スレッドが別のファイルにアクセスするよう、I/O の非同期の使用 I/O 関数の逐次実行と同じ結果を生成します。