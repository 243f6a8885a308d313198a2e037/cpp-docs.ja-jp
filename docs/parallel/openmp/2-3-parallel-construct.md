---
title: "2.3 parallel コンストラクト |Microsoft ドキュメント"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.technology:
- cpp-windows
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- C++
ms.assetid: 190eacdf-2c16-4c06-8cb7-ac60eb211425
caps.latest.revision: 
author: mikeblome
ms.author: mblome
manager: ghogen
ms.workload:
- cplusplus
ms.openlocfilehash: 89167547085682a81cc1d281f4f32ab55022d27c
ms.sourcegitcommit: 8fa8fdf0fbb4f57950f1e8f4f9b81b4d39ec7d7a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/21/2017
---
# <a name="23-parallel-construct"></a>2.3 parallel コンストラクト
次のディレクティブでは、同時に複数のスレッドで実行されるプログラムの地域である並列領域を定義します。 これは、並列実行を開始する基本的なコンストラクトです。  
  
```  
#pragma omp parallel [clause[ [, ]clause] ...] new-line   structured-block  
```  
  
 *句*は、次のいずれか。  
  
 **場合 (** *スカラー式* **)**  
  
 **プライベート (** *変数一覧* **)**  
  
 **firstprivate (** *変数一覧* **)**  
  
 **既定値 (共有 (& a) #124; なし)**  
  
 **共有 (** *変数一覧* **)**  
  
 **copyin (** *変数一覧* **)**  
  
 **削減 (** *演算子* **:***変数一覧* **)**   
  
 **num_threads (** *整数式* **)**  
  
 スレッドには、parallel コンストラクトが検出されると、次のいずれかが true の場合、スレッドのチームが作成されます。  
  
-   いいえ**場合**句が存在します。  
  
-   **場合**式は 0 以外の値に評価します。  
  
 このスレッドがスレッド数が 0 の場合、チームのマスター スレッドとなり、マスター スレッドなど、チームのすべてのスレッドでは、領域を並列に実行します。 場合の値、**場合**式が 0 で、領域は、シリアル化します。  
  
 次の規則が要求されるスレッドの数を調べるには、順番見なされます。 条件を満たすには、最初のルールが適用されます。  
  
1.  場合、 **num_threads**句が存在し、整数型の式の値が要求されたスレッドの数。  
  
2.  場合、 **omp_set_num_threads**ライブラリ関数が呼び出されて、最後に実行された呼び出しの引数の値が要求されたスレッドの数。  
  
3.  場合、環境変数**OMP_NUM_THREADS**が定義されている場合は、この環境変数の値は要求されたスレッドの数。  
  
4.  上記の方法のいずれもが使用されている場合、要求されたスレッドの数は実装定義です。  
  
 場合、 **num_threads**句が存在し、によって要求されたスレッドの数によって置き換えられる、 **omp_set_num_threads**ライブラリ関数、または**OMP_NUM_THREADS**並列領域のみの環境変数に適用されます。 以降の並列領域は、これによっては影響しません。  
  
 並列領域を実行するスレッドの数は、スレッドの数を動的に調整が有効になっているかどうかによっても異なります。 動的に調整が無効になっている場合、要求された数のスレッドは、並行領域に実行されます。 動的に調整が有効になっている場合は、並列領域を実行することがあるスレッドの最大数はスレッドの要求の数です。  
  
 スレッドの数を動的に調整が無効になっているし、並行領域に対して要求されたスレッドの数は、ランタイム システムが供給できる数を超えています。 中に、並行領域が発生した場合、プログラムの動作は実装で定義します。 実装では、プログラムの実行を妨げる可能性、たとえば、または並列領域がシリアル化します。  
  
 **Omp_set_dynamic**ライブラリ関数、および**OMP_DYNAMIC**を有効にし、スレッドの数を動的に調整を無効にする環境変数を使用することができます。  
  
 特定の時点でスレッドを実際にホストの物理プロセッサの数は、実装定義です。 作成した後、その並列領域の間チーム内のスレッドの数が一定にします。 ユーザーによって明示的に、または 1 つの並列領域からのランタイム システムによって自動的に変更できます。  
  
 各スレッドで、並列領域の動的範囲内に含まれるステートメントが実行され、各スレッドが他のスレッドとは異なるステートメントのパスを実行できます。 並列領域の構文の範囲外で発生するディレクティブは、孤立したディレクティブと呼ばれます。  
  
 暗黙のバリア並列領域の末尾には チームのマスター スレッドだけでは、並列領域の最後まで実行を続けます。  
  
 並列領域を実行するチーム内のスレッドには、別の parallel コンストラクトが発生すると、新しいチームを作成し、その新しいチームのマスターになります。 入れ子になった並列領域は、既定でシリアル化されます。 その結果、既定では、入れ子になった並列領域は 1 つのスレッド構成されるチームによって実行されます。 ランタイム ライブラリ関数を使用して、既定の動作を変更する可能性があります**omp_set_nested**または環境変数**OMP_NESTED**です。 ただし、チーム内の入れ子になった並列領域を実行するスレッドの数は、実装定義にします。  
  
 制限は、**並列**ディレクティブは、次のようにします。  
  
-   最大で 1 つ**場合**句は、ディレクティブに表示できます。  
  
-   場合に、内側の効果をいずれかの側かどうか指定ではない式または**num_threads**式が発生します。  
  
-   A**スロー**内、並行領域実行を同じ構造化ブロックの動的な範囲内で再開するが発生する必要がありますが実行され、例外をスローしたのと同じスレッドによってキャッチする必要があります。  
  
-   1 つだけ**num_threads**句は、ディレクティブに表示できます。 **Num_threads**式は、並列領域のコンテキストの外部評価され、正の整数値に評価される必要があります。  
  
-   評価の順序、**場合**と**num_threads**句は指定されていません。  
  
## <a name="cross-references"></a>クロス リファレンス  
  
-   **プライベート**、 **firstprivate**、**既定**、**共有**、 **copyin**、および**削減**句を参照してください[セクション 2.7.2](../../parallel/openmp/2-7-2-data-sharing-attribute-clauses.md) [25] ページ。  
  
-   **OMP_NUM_THREADS**環境変数、[セクション 4.2](../../parallel/openmp/4-2-omp-num-threads.md) 48 ページ。  
  
-   **omp_set_dynamic**ライブラリ関数を参照してください[セクション 3.1.7](../../parallel/openmp/3-1-7-omp-set-dynamic-function.md)ページ 39 にします。  
  
-   **OMP_DYNAMIC**環境変数を参照してください[セクション 4.3](../../parallel/openmp/4-3-omp-dynamic.md) 49 ページにします。  
  
-   **omp_set_nested**関数を参照してください[セクション 3.1.9](../../parallel/openmp/3-1-9-omp-set-nested-function.md) 40 ページのです。  
  
-   **OMP_NESTED**環境変数を参照してください[セクション 4.4](../../parallel/openmp/4-4-omp-nested.md) 49 ページにします。  
  
-   **omp_set_num_threads**ライブラリ関数を参照してください[セクション 3.1.1](../../parallel/openmp/3-1-1-omp-set-num-threads-function.md)ページ 36 にします。