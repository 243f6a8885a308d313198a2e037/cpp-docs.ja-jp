---
title: 2.4.1 for のコンストラクト |Microsoft ドキュメント
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-parallel
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: 27d2cbce-786b-4819-91d3-d55b2cc57a5e
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: d5165c21f0bf6f2b9757550208d5e8e26a2bd3b1
ms.sourcegitcommit: 7019081488f68abdd5b2935a3b36e2a5e8c571f8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/07/2018
ms.locfileid: "33693550"
---
# <a name="241-for-construct"></a>2.4.1 for のコンストラクト
**の**ディレクティブは、反復的な work-sharing コンス トラクターを関連付けられているループのイテレーションが並列で実行されることを示すを識別します。 反復処理、**の**ループがバインドする、parallel コンストラクトを実行するチームに既に存在するスレッド間で分散されます。 構文、**の**コンストラクトのとおりです。  
  
```  
#pragma omp for [clause[[,] clause] ... ] new-linefor-loop  
```  
  
 句では、次のいずれかです。  
  
 **private(** *variable-list* **)**  
  
 **firstprivate(** *variable-list* **)**  
  
 **lastprivate(** *variable-list* **)**  
  
 **削減 (** *演算子* **:** *変数の一覧 * * *)**  
  
 **順序付け**  
  
 **スケジュール (** *種類*[、 *chunk_size*]**)**  
  
 **nowait**  
  
 **の**ディレクティブは、対応する構造体で制限を配置**の**ループします。 具体的には、対応する**の**ループ正規形である必要があります。  
  
 **(** *init expr* **;***var 論理 op b*です。*incr-expr * * *)**  
  
 *init expr*  
 次のいずれかになります。  
  
 *var* = *lb*  
  
 *整数型 var* = *lb*  
  
 *incr expr*  
 次のいずれかになります。  
  
 ++*Var*  
  
 *var* ++  
  
 -- *Var*  
  
 *var* --  
  
 *var* += *incr*  
  
 *var* -= *incr*  
  
 *var* = *var* + *incr*  
  
 *var* = *incr* + *var*  
  
 *var* = *var* - *incr*  
  
 *var*  
 符号付き整数変数です。 この変数を共有それ以外の場合は、場合に暗黙的にプライベートの間、**の**します。   この変数は、の本体内で変更しないでください、**の**ステートメントです。 変数が指定されていない限り**lastprivate**ループが不確定である後は、その値。  
  
 *論理 op*  
 次のいずれかになります。  
  
 <  
  
 \<=  
  
 >  
  
 \>=  
  
 *lb*、 *b*、および*incr*  
 ループのインバリアント整数式です。 これらの式の評価中に同期することはありません。 したがって、評価された副作用は、不確定な結果を生成します。  
  
 正規の形式でループするエントリを計算するループのイテレーションの数は、注意してください。 型の値でこの計算が行われる*var*、整数の上位変換した後です。 場合に、特定の値の*b* - *lb* + *incr*型、結果は不確定に表すことができません。 さらに、if*論理 op*は < または\<= then *incr expr*が発生する必要があります*var*ループの反復ごとに増加します。   場合*論理 op*は > または > = then *incr expr*が発生する必要があります*var*ループの反復ごとに下げることができます。  
  
 **スケジュール**句を指定する方法のイテレーション、**の**ループは、チームのスレッド間で分けられます。 プログラムの正確性は、特定のイテレーションを実行するスレッドに依存する必要がありますしません。 値*chunk_size*、指定した場合、正の値を持つループ インバリアント整数式でなければなりません。 この式の評価中に同期することはありません。 したがって、評価された副作用は、不確定な結果を生成します。 スケジュール*種類*次のいずれかになります。  
  
 表 2-1**スケジュール**句*種類*値  
  
|||  
|-|-|  
|静的|ときに**スケジュール (静的、** *chunk_size * * *)** を指定すると、イテレーションがで指定されたサイズのチャンクに分割*chunk_size*です。 チャンクは、スレッド数の順序でラウンド ロビン方式で、チーム内のスレッドに静的に割り当てられます。 ない場合*chunk_size*が指定されているイテレーション領域が各スレッドに割り当てられている 1 つのチャンクのサイズとほぼ等しくいるチャンクに分割されます。|  
|dynamic|ときに**スケジュール (動的、** *chunk_size * * *)** を指定すると、イテレーションは、一連のチャンクを含む各に分けられます*chunk_size*反復処理します。 各チャンクは、割り当てを待機しているスレッドに割り当てられます。 スレッドは、チャンクの処理を実行し、割り当てられるにチャンクが残っていないまで、次の割り当てを待機します。 イテレーションの数を減らしてを割り当てられるに、最後のチャンクであることに注意してください。 ない場合*chunk_size*を指定すると、既定値は 1 です。|  
|ガイド付き|ときに**スケジュール (ガイド付き、** *chunk_size * * *)** を指定すると、イテレーションがサイズを減少しているチャンク内のスレッドに割り当てられています。 スレッドには、その割り当てられたチャンクの処理が完了すると、まったく残っていなくてもまでを別のチャンクでは、動的に割り当てられます。 *Chunk_size* 1、各チャンクのサイズが約繰り返される数 割り当てられていないスレッドの数で割った値します。 これらのサイズ縮小約指数関数的に 1 です。 *Chunk_size*値を持つ*k* 1 より大きく、サイズが指数関数的に小さく約*k*最後のチャンクがありますよりも少ないことを除いて、 *k*反復処理します。 ない場合*chunk_size*を指定すると、既定値は 1 です。|  
|ランタイム|ときに**schedule (runtime)** が指定されている関連スケジュールは実行時まで遅延が決定します。 スケジュール*種類*チャンクのサイズは、環境変数を設定して実行時に選択して**OMP_SCHEDULE**です。 この環境変数が設定されていない場合、結果として得られるスケジュールは、実装定義します。 ときに**schedule (runtime)** が指定されている*chunk_size*を指定できません。|  
  
 明示的に定義されているがない場合は、**スケジュール**句、既定値**スケジュール**実装で定義されます。  
  
 OpenMP に準拠したプログラムを正しく実行の特定のスケジュールの保証はありません。 プログラムがスケジュールに依存しないように*種類*を同じスケジュールの実装のバリエーションを持つことになっているために、上記の説明に正確に準拠した*種類*間異なるコンパイラです。 説明は、特定の状況に適切なスケジュールを選択するのに使用できます。  
  
 **注文**句必要がある場合に**注文**ディレクティブにバインド、**の**を構築します。  
  
 暗黙的なバリアの末尾には、**の**れない限り、作成、 **nowait**句を指定します。  
  
 制限は、**の**ディレクティブは、次のようにします。  
  
-   **の**ループは、構造化ブロックである必要があり、さらに、それを実行する必要がありますを終了できませんが、 **break**ステートメントです。  
  
-   値によって、ループの制御式の**の**ループに関連付けられている、**の**ディレクティブは、チーム内のすべてのスレッドで同じである必要があります。  
  
-   **の**ループの反復変数は符号付き整数型である必要があります。  
  
-   1 つだけ**スケジュール**句に表示できる、**の**ディレクティブです。  
  
-   1 つだけ**注文**句に表示できる、**の**ディレクティブです。  
  
-   1 つだけ**nowait**句に表示できる、**の**ディレクティブです。  
  
-   指定されていない場合または任意の辺に影響を及ぼすどのくらいの頻度では、 *chunk_size*、 *lb*、 *b*、または*incr*式が発生します。  
  
-   値、 *chunk_size*式は、チームのすべてのスレッドで同じである必要があります。  
  
## <a name="cross-references"></a>クロス リファレンス  
  
-   **プライベート**、 **firstprivate**、 **lastprivate**、および**削減**句を参照してください[セクション 2.7.2](../../parallel/openmp/2-7-2-data-sharing-attribute-clauses.md) [25] ページ。  
  
-   **OMP_SCHEDULE**環境変数を参照してください[セクション 4.1](../../parallel/openmp/4-1-omp-schedule.md) 48 ページ。  
  
-   **順序付け**構築を参照してください[セクション 2.6.6](../../parallel/openmp/2-6-6-ordered-construct.md) 22 ページにします。  
  
-   [付録 D](../../parallel/openmp/d-using-the-schedule-clause.md)93 のページをスケジュール句を使用して詳細を示します。