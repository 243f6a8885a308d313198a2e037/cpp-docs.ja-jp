---
title: プログラムとリンケージ (C++) |Microsoft ドキュメント
ms.custom: ''
ms.date: 04/09/2018
ms.technology:
- cpp-language
ms.topic: language-reference
dev_langs:
- C++
ms.assetid: a6493ba0-24e2-4c89-956e-9da1dea660cb
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 2dba8698461636e292771fc1e5a4f5ac0a633e73
ms.sourcegitcommit: d06966efce25c0e66286c8047726ffe743ea6be0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/19/2018
ms.locfileid: "36238670"
---
# <a name="program-and-linkage-c"></a>プログラムとリンケージ (C++)

C++ プログラムでは、*シンボル*、たとえば変数または関数の名前、できます宣言、そのスコープ内で任意の数が、1 回定義することのみです。 これは、1 つ定義規則 (ODR) です。 A*宣言*プログラムに名前が導入されています (または再が導入されています)。 A*定義*名前を紹介し、変数、明示的に初期化します。 A*関数の定義*署名と、関数本体で構成されます。

これらの宣言は。

```cpp
int i;
int f(int x);
```

定義を次に示します。

```cpp
int i{42};
int f(int x){ return x * i; }
```

1 つまたは複数のプログラムで構成されます*翻訳単位*です。 実装ファイル (.cpp、.cxx など) とすべてのヘッダー (.h、.hpp など) 直接または間接的にそれに含まれる翻訳単位で構成されます。 リンカーが、1 つにコンパイルされた翻訳単位をマージするまで、コンパイラによって各翻訳単位が個別にコンパイルは*プログラム*です。 ODR 規則に違反通常表示リンカー エラーとして同じ名前に 2 つの異なる定義がある場合は、別の翻訳単位で。

一般に、複数のファイルを変数に表示されるようにする最善の方法が、ヘッダー ファイルに配置し、追加、#、宣言が必要なすべての .cpp ファイルで include ディレクティブです。 追加することによって *#include guard*するヘッダーの内容の周囲を宣言名は 1 回定義されてのみを確認してください。

ただし、場合によっては必要があります、グローバル変数または .cpp ファイルでクラスを宣言します。 このような場合に、オブジェクトの名前が 1 つのファイルまたはすべてのファイルだけを適用するかどうか、コンパイラとリンカーに指示して必要があります。

## <a name="linkage-vs-scope"></a>スコープとリンケージ

概念*リンケージ*翻訳単位間では、全体として (変数、型名、関数名) など、プログラム内のシンボルはグローバルの表示を参照します。 概念*スコープ*名前空間、クラス、または関数の本体などのブロック内で宣言されているシンボルを参照します。 このようなシンボル定義がスコープ内でのみ表示されます。リンケージの概念は、それらには適用されません。 

## <a name="external-vs-internal-linkage"></a>内部リンケージと外部

A*関数を空き*はグローバルに定義されている関数または名前空間スコープ。 非 const グローバル変数と既定では、free 関数が*外部リンケージ*; 翻訳単位は、プログラムから表示されます。 そのため、他のグローバル オブジェクト (変数、クラス定義など) が持てるなしその名前です。 シンボルが*内部リンケージ*または*リンケージの*宣言されている翻訳単位内でのみ表示されません。 名前が内部リンケージを持つ別の翻訳単位で同じ名前があります。 クラス定義で宣言された変数または関数の本文にはリンケージが必要ありません。 

として明示的に宣言して内部リンケージがある、グローバル名を強制する**静的**です。 これは、宣言されている同じ翻訳単位をその表示を制限します。 このコンテキストでは、ことに注意してください。**静的**ときにローカル変数に適用とは異なるもののことを意味します。

次のオブジェクトは、既定では内部リンケージを持ちます。
- const オブジェクト
- constexpr オブジェクト
- typedef
- 名前空間のスコープ内の静的オブジェクト

Const オブジェクトの外部リンケージを与えるには、宣言として**extern**し、値を割り当てます。

```cpp
extern const int value = 42;
```

参照してください[extern](extern-cpp.md)詳細についてはします。

## <a name="see-also"></a>関連項目

 [基本的な概念](../cpp/basic-concepts-cpp.md)