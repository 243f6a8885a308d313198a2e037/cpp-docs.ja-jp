---
title: "更新ハンドラーが呼び出されるタイミング | Microsoft Docs"
ms.custom: ""
ms.date: "12/03/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "コマンド ルーティング, 更新コマンド"
  - "コマンド ルーティング, 更新ハンドラー"
  - "無効化 (メニュー項目を)"
  - "無効化 (ツール バー ボタンを)"
  - "メニュー項目, 有効化"
  - "メニュー [C++], 初期化"
  - "メニュー [C++], 更新 (コンテキスト変更に応じて)"
  - "ツール バー ボタン [C++], 有効化"
  - "ツール バー コントロール [MFC], 更新 (OnIdle メソッドで)"
  - "ツール バー [C++], 更新"
  - "更新ハンドラー"
  - "更新ハンドラー, 呼び出し"
  - "更新 (ユーザー インターフェイス オブジェクトを)"
ms.assetid: 7359f6b1-4669-477d-bd99-690affed08d9
caps.latest.revision: 9
caps.handback.revision: 5
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# 更新ハンドラーが呼び出されるタイミング
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

ユーザーのクリックを `WM_INITMENUPOPUP` メッセージを生成するファイル メニューのマウスとします。  フレームワークの更新機能は、まとめてドロップダウン メニュー、ユーザーがそれを参照するには、ファイル メニューのすべての項目を更新します。  
  
 これを行うには、標準のコマンド経路上のポップアップ メニューのメニュー項目の更新コマンドをルーティングします。  ルーティングのコマンド ターゲットに更新コマンド \(フォーム `ON_UPDATE_COMMAND_UI`\) の適切なメッセージ マップのエントリに一致させようと「更新ハンドラー」関数を呼び出すことによって、メニュー項目を更新することができます。  したがって、6 個のメニュー項目を持つメニューの場合、6 回の更新コマンドが送信されます。  更新ハンドラーはメニュー項目のコマンド ID が存在する場合は、更新を呼び出します。  それ以外の場合、フレームワークは、コマンド ID と有効のハンドラーの存在をチェックするか、必要に応じてメニュー項目を無効にします。  
  
 フレームワークがコマンド ルーティング中に `ON_UPDATE_COMMAND_UI` エントリが見つからなかった場合は、別の場所に `ON_COMMAND` エントリが同じコマンド ID には自動的にユーザー インターフェイス オブジェクトを有効にします。  それ以外の場合は、ユーザー インターフェイス オブジェクトを無効にします。  したがって、ユーザー インターフェイス オブジェクトが有効であることを確認するために、オブジェクトが生成する指定します。または、それに対する更新ハンドラーを指定します。コマンドのハンドラーです。  トピック [ユーザー インターフェイス オブジェクトとコマンド ID](../mfc/user-interface-objects-and-command-ids.md)の図を参照してください。  
  
 ユーザー インターフェイス オブジェクトの既定の無効にを無効にする可能性があります。  詳細については、" *MFC リファレンス"の*" `CFrameWnd` クラスの [m\_bAutoMenuEnable](../Topic/CFrameWnd::m_bAutoMenuEnable.md) のメンバーを参照してください。  
  
 メニューは、アプリケーションの初期化 `WM_INITMENUPOPUP` メッセージを受信したときに発生するフレームワークで自動的に行われます。  アイドル ループでは、フレームワークはボタンの更新ハンドラーをメニューに対すると同様にコマンド ルーティングを検索します。  
  
## 参照  
 [ユーザー インターフェイス オブジェクトの更新方法](../mfc/how-to-update-user-interface-objects.md)