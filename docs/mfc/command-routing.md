---
title: "コマンドの振り分け (ルーティング) | Microsoft Docs"
ms.custom: ""
ms.date: "12/03/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "devlang-cpp"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "C++"
helpviewer_keywords: 
  - "MFC, コマンド ルーティング"
  - "コマンド処理, ルーティング (コマンドを)"
  - "ハンドラー"
  - "ハンドラー, コマンド"
  - "コマンド ルーティング"
ms.assetid: 9393a956-bdd4-47c5-9013-dbd680433f93
caps.latest.revision: 9
caps.handback.revision: 5
author: "mikeblome"
ms.author: "mblome"
manager: "ghogen"
---
# コマンドの振り分け (ルーティング)
[!INCLUDE[vs2017banner](../assembler/inline/includes/vs2017banner.md)]

コマンドを使用するには、\[プロパティ\] ウィンドウを使って、コマンドとハンドラー関数を対応付けるメッセージ マップを作成する必要があります。 また、コマンド ハンドラーのほとんどを作成する必要もあります。  
  
 通常、Windows メッセージはメイン フレーム ウィンドウに送信されますが、コマンド メッセージはさらに他のオブジェクトにルーティングされます。 フレームワークは、コマンド ターゲット オブジェクトの標準シーケンスに従って、コマンドのハンドラーが存在すると思われるオブジェクトの 1 つにコマンドをルーティングします。 各コマンド ターゲット オブジェクトは、受信したメッセージを処理できるかどうかをメッセージ マップで確認します。  
  
 メッセージ マップを確認するタイミングは、コマンド ターゲット クラスによって異なります。 通常、クラスは、コマンドを最初に特定の他のオブジェクトにルーティングして、そのオブジェクトでコマンドを処理しようとします。 どのオブジェクトもコマンドを処理できない場合、元のクラスは独自のメッセージ マップをチェックします。 その後、元のクラスがハンドラー自体を提供できない場合は、そのコマンドをさらに他のコマンド ターゲットにルーティングします。 以下の「[標準のコマンド ルート](#_core_standard_command_route)」の表は、各クラスのチェック シーケンスを示しています。 コマンド ターゲットがコマンドをルーティングする一般的な順序は、次のとおりです。  
  
1.  現在アクティブな子コマンド ターゲット オブジェクト  
  
2.  コマンド ターゲット自身  
  
3.  その他のコマンド ターゲット  
  
 このルーティング メカニズムは、 コマンドに応答するハンドラーの処理に比べると、それほど負担になりません。 フレームワークでコマンドが生成されるのは、ユーザーがユーザー インターフェイス オブジェクトを操作したときだけです。  
  
### 標準のコマンド ルート  
  
|コマンドを受信したオブジェクトの種類 」を参照してください。 」を参照してください。|コマンドを処理する機会が与えられるコマンド ターゲット オブジェクトとその順序|  
|------------------------------------------------|---------------------------------------------|  
|MDI フレーム ウィンドウ \(`CMDIFrameWnd`\)|1.  アクティブな `CMDIChildWnd`<br />2.  このフレーム ウィンドウ<br />3.  アプリケーション \(`CWinApp` オブジェクト\)|  
|ドキュメント フレーム ウィンドウ \(`CFrameWnd`､`CMDIChildWnd`\)|1.  アクティブ ビュー<br />2.  このフレーム ウィンドウ<br />3.  アプリケーション \(`CWinApp` オブジェクト\)|  
|表示|1.  このビュー<br />2.  ビューにアタッチされたドキュメント|  
|ドキュメント|1.  このドキュメント<br />2.  ドキュメントにアタッチされたドキュメント テンプレート|  
|ダイアログ ボックス|1.  このダイアログ ボックス<br />2.  ダイアログ ボックスを所有するウィンドウ<br />3.  アプリケーション \(`CWinApp` オブジェクト\)|  
  
 前の表の右側の列に他のオブジェクト \(ドキュメントなど\) が示されている場合は、左側の列の対応する項目を確認してください。 たとえば、右側の列を見ると、ビューがコマンドをドキュメントに転送していることがわかるので、左側の列の「ドキュメント」のルーティングも参照してください。  
  
## 参照  
 [フレームワークがハンドラーを呼び出す方法](../mfc/how-the-framework-calls-a-handler.md)